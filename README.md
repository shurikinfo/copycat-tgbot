# copycat_tgbot
Шаблонный проект для Telegram-бота

## Стэк:
* asyncio
* aiogram
* ASGI
* FastAPI

## Минимальные требования:
* python (^3.12)
* poetry (^1.7.1)

[Инструкция для получения токена](https://core.telegram.org/bots#how-do-i-create-a-bot)

## Что есть:
* aiogram:
  * Базовые команды:
    * `/start` - для инициализации бота
    * `/help` - для получения списка команд
* FastAPI:
  * Веб-хук для продакшен инсталяции

## Локальная разработка
> Для простоты использования хранение секретов реализовано через .env, однако, никто не ограничивает в том, чтобы положить всё в более надежное место...

### Разворачивание окружения
* установить локально окружение `poetry install`

### Локальный запуск
`poetry run run_bot`

## Бой
* Для запуска на бою лучше запускать через ASGI, используя webhook, который будет дергать Telegram при обращении к боту.
  * Следует указать адрес для веб-хука в `WEBHOOK_URL` в переменную окружения.
  * Для того, чтобы инстаграм начал слать на ваш вебхук, ему следует об этом сообщить:
    * `curl -F "url=<WEBHOOK_URL>" https://api.telegram.org/bot<BOT_TOKEN>/setWebhook`
